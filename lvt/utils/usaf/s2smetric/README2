### Postprocessing Metric scripts for hydrologic forecasts ###
##############################################################

## The following set of scripts convert the metrics files produced
## in the previous step to CF-1.8 convention, and merges the output into
## a single file.
##
## NOTE:  Both scripts use the netCDF Operators (NCO) software to edit and
## copy data.  See http://nco.sourceforge.net/.  The paths for both scripts
## are currently hardwired to /usr/local/other/nco/5.0.1/bin (the location
## on the NASA Discover supercomputer).  WHEN RUNNING ON A DIFFERENT SYSTEM,
## THE PATHS MUST BE UPDATED BEFORE RUNNING THE SCRIPTS.
##
## "convert_s2s_anom_cf.py" updates S2S monthly anomaly/standardized anomaly
## netCDF files to conform with CF-1.8 convention. Uses the intermediate
## output in "lis_postproc_metric_s2s_use-case_output_v74.tar.gz".  First,
## create an output directory (e.g., cf_files). Then, six invocations of the
## script are required.

convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_ANOM/AFRICOM/NOAHMP/CFSV2_RootZone-SM_ANOM_init_monthly_10_2020.nc cf_files/
convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_ANOM/AFRICOM/NOAHMP/CFSV2_Streamflow_ANOM_init_monthly_10_2020.nc cf_files/
convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_ANOM/AFRICOM/NOAHMP/CFSV2_Surface-SM_ANOM_init_monthly_10_2020.nc cf_files/
convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_SANOM/AFRICOM/NOAHMP/CFSV2_RootZone-SM_SANOM_init_monthly_10_2020.nc cf_files/
convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_SANOM/AFRICOM/NOAHMP/CFSV2_Streamflow_SANOM_init_monthly_10_2020.nc cf_files/
convert_s2s_anom_cf.py NMME_FCST_DATA_AF/DYN_SANOM/AFRICOM/NOAHMP/CFSV2_Surface-SM_SANOM_init_monthly_10_2020.nc cf_files/

## "merge_s2s_anom_cf.py" merges CF-convention S2S anomaly files into
## single file for sharing.  The user may specify a new directory for the
## merged file, or use the same directory (the example below uses the same
## directory).  The user must also indicate the start and end dates of the
## forecast period, and the ID of the NMME model (no lower-case letters) used
## to force LIS. A single invocation is required:

/discover/nobackup/projects/nca/karsenau/S2S/AFRICOM/share/final_code/lvt/utils/usaf/s2smetric/merge_s2s_anom_cf.py cf_files/ cf_files 20201002 20210701 CFSV2

## NOTE:  The filename for the merged output follows the Air Force Weather
## convention.

##
## The final output files of the postprocessing section are in:
##
## "lis_postproc_metric_final_s2s_use-case_output_v74.tar.gz"
##
